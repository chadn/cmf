<svg id="my-svg" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart" style="max-width: 1432.86px; background-color: white;" viewBox="0 -50 1432.859375 1416" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#my-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#my-svg .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#my-svg .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#my-svg .error-icon{fill:#552222;}#my-svg .error-text{fill:#552222;stroke:#552222;}#my-svg .edge-thickness-normal{stroke-width:1px;}#my-svg .edge-thickness-thick{stroke-width:3.5px;}#my-svg .edge-pattern-solid{stroke-dasharray:0;}#my-svg .edge-thickness-invisible{stroke-width:0;fill:none;}#my-svg .edge-pattern-dashed{stroke-dasharray:3;}#my-svg .edge-pattern-dotted{stroke-dasharray:2;}#my-svg .marker{fill:#333333;stroke:#333333;}#my-svg .marker.cross{stroke:#333333;}#my-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#my-svg p{margin:0;}#my-svg .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#my-svg .cluster-label text{fill:#333;}#my-svg .cluster-label span{color:#333;}#my-svg .cluster-label span p{background-color:transparent;}#my-svg .label text,#my-svg span{fill:#333;color:#333;}#my-svg .node rect,#my-svg .node circle,#my-svg .node ellipse,#my-svg .node polygon,#my-svg .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#my-svg .rough-node .label text,#my-svg .node .label text,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-anchor:middle;}#my-svg .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#my-svg .rough-node .label,#my-svg .node .label,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-align:center;}#my-svg .node.clickable{cursor:pointer;}#my-svg .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#my-svg .arrowheadPath{fill:#333333;}#my-svg .edgePath .path{stroke:#333333;stroke-width:2.0px;}#my-svg .flowchart-link{stroke:#333333;fill:none;}#my-svg .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#my-svg .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#my-svg .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#my-svg .cluster text{fill:#333;}#my-svg .cluster span{color:#333;}#my-svg div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#my-svg .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#my-svg rect.text{fill:none;stroke-width:0;}#my-svg .icon-shape,#my-svg .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .icon-shape p,#my-svg .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#my-svg .icon-shape rect,#my-svg .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#my-svg .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#my-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}#my-svg .benefit&gt;*{fill:#ccffcc!important;stroke:#00cc00!important;stroke-width:2px!important;}#my-svg .benefit span{fill:#ccffcc!important;stroke:#00cc00!important;stroke-width:2px!important;}#my-svg .proposed&gt;*{fill:#e7f3ff!important;stroke:#0066cc!important;stroke-width:2px!important;}#my-svg .proposed span{fill:#e7f3ff!important;stroke:#0066cc!important;stroke-width:2px!important;}</style><g><marker id="my-svg_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"/></marker><g class="root"><g class="clusters"/><g class="edgePaths"/><g class="edgeLabels"/><g class="nodes"><g class="root" transform="translate(0, 0)"><g class="clusters"><g class="cluster proposed" id="Proposed" data-look="classic"><rect style="fill:#e7f3ff !important;stroke:#0066cc !important;stroke-width:2px !important" x="8" y="8" width="1416.859375" height="1350"/><g class="cluster-label" transform="translate(616.4296875, 8)"><foreignObject width="200" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>âœ… PROPOSED ARCHITECTURE (SIMPLIFIED)</p></span></div></foreignObject></g></g><g class="cluster" id="SyncLayer" data-look="classic"><rect style="" x="115.6015625" y="45.5" width="1226.7578125" height="225"/><g class="cluster-label" transform="translate(667.06640625, 45.5)"><foreignObject width="123.828125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Sync Layer (New)</p></span></div></foreignObject></g></g><g class="cluster" id="MapContainerNew" data-look="classic"><rect style="" x="61.8984375" y="942.5" width="470.51953125" height="378"/><g class="cluster-label" transform="translate(203.720703125, 942.5)"><foreignObject width="186.875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>MapContainer (Pure View)</p></span></div></foreignObject></g></g><g class="cluster" id="PageTsxNew" data-look="classic"><rect style="" x="64.34765625" y="369.5" width="720.51171875" height="474"/><g class="cluster-label" transform="translate(340.431640625, 369.5)"><foreignObject width="168.34375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>page.tsx (Orchestrator)</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path d="M606.797,533L601.65,545.25C596.503,557.5,586.208,582,568.692,602.141C551.176,622.283,526.438,638.066,514.069,645.957L501.7,653.849" id="L_AppControllerNew_MapHook_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_AppControllerNew_MapHook_0" data-points="W3sieCI6NjA2Ljc5NzM0NTYzMjUzMDEsInkiOjUzM30seyJ4Ijo1NzUuOTE0MDYyNSwieSI6NjA2LjV9LHsieCI6NDk4LjMyODAzMDg3MzQ5Mzk2LCJ5Ijo2NTZ9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M357.883,1070L350.95,1080.25C344.017,1090.5,330.151,1111,313.121,1131.036C296.09,1151.072,275.895,1170.644,265.797,1180.43L255.7,1190.216" id="L_MapGL_ViewportOnly_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_MapGL_ViewportOnly_0" data-points="W3sieCI6MzU3Ljg4Mjc1NDE5Nzc2MTIsInkiOjEwNzB9LHsieCI6MzE2LjI4NTE1NjI1LCJ5IjoxMTMxLjV9LHsieCI6MjUyLjgyNzQyNTM3MzEzNDMzLCJ5IjoxMTkzfV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M483.758,233L479.848,239.25C475.938,245.5,468.117,258,464.207,272.5C460.297,287,460.297,303.5,460.297,320C460.297,336.5,460.297,353,460.297,380C460.297,407,460.297,444.5,460.297,484C460.297,523.5,460.297,565,455.386,593.438C450.475,621.876,440.654,637.253,435.743,644.941L430.832,652.629" id="L_MapSync_MapHook_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_MapSync_MapHook_0" data-points="W3sieCI6NDgzLjc1NzgxMjUsInkiOjIzM30seyJ4Ijo0NjAuMjk2ODc1LCJ5IjoyNzAuNX0seyJ4Ijo0NjAuMjk2ODc1LCJ5IjozMjB9LHsieCI6NDYwLjI5Njg3NSwieSI6MzY5LjV9LHsieCI6NDYwLjI5Njg3NSwieSI6NDgyfSx7IngiOjQ2MC4yOTY4NzUsInkiOjYwNi41fSx7IngiOjQyOC42NzkxMjI3NDA5NjM4NiwieSI6NjU2fV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M400.68,225.038L385.986,232.615C371.293,240.192,341.906,255.346,327.213,271.173C312.52,287,312.52,303.5,312.52,320C312.52,336.5,312.52,353,312.52,380C312.52,407,312.52,444.5,312.52,484C312.52,523.5,312.52,565,316.722,593.415C320.924,621.831,329.329,637.162,333.531,644.827L337.734,652.493" id="L_MapSync_MapHook_2" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_MapSync_MapHook_2" data-points="W3sieCI6NDAwLjY3OTY4NzUsInkiOjIyNS4wMzc5MDU3ODE2NjEyN30seyJ4IjozMTIuNTE5NTMxMjUsInkiOjI3MC41fSx7IngiOjMxMi41MTk1MzEyNSwieSI6MzIwfSx7IngiOjMxMi41MTk1MzEyNSwieSI6MzY5LjV9LHsieCI6MzEyLjUxOTUzMTI1LCJ5Ijo0ODJ9LHsieCI6MzEyLjUxOTUzMTI1LCJ5Ijo2MDYuNX0seyJ4IjozMzkuNjU2NjI2NTA2MDI0MSwieSI6NjU2fV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M198.723,1193L195.08,1182.75C191.437,1172.5,184.15,1152,180.507,1125C176.863,1098,176.863,1064.5,176.863,1033C176.863,1001.5,176.863,972,176.863,949C176.863,926,176.863,909.5,176.863,893C176.863,876.5,176.863,860,188.598,845.276C200.333,830.552,223.802,817.603,235.536,811.129L247.271,804.655" id="L_ViewportOnly_MapHook_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_ViewportOnly_MapHook_0" data-points="W3sieCI6MTk4LjcyMzQxNDE3OTEwNDQ4LCJ5IjoxMTkzfSx7IngiOjE3Ni44NjMyODEyNSwieSI6MTEzMS41fSx7IngiOjE3Ni44NjMyODEyNSwieSI6MTAzMX0seyJ4IjoxNzYuODYzMjgxMjUsInkiOjk0Mi41fSx7IngiOjE3Ni44NjMyODEyNSwieSI6ODkzfSx7IngiOjE3Ni44NjMyODEyNSwieSI6ODQzLjV9LHsieCI6MjUwLjc3MzQzNzUsInkiOjgwMi43MjI3NjM5MzE3MjU1fV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M267.024,656L254.511,647.75C241.999,639.5,216.974,623,204.462,594C191.949,565,191.949,523.5,191.949,484C191.949,444.5,191.949,407,191.949,380C191.949,353,191.949,336.5,191.949,320C191.949,303.5,191.949,287,226.105,267.406C260.261,247.812,328.572,225.124,362.728,213.781L396.884,202.437" id="L_MapHook_MapSync_0" class="edge-thickness-normal edge-pattern-dotted edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_MapHook_MapSync_0" data-points="W3sieCI6MjY3LjAyMzkwODEzMjUzMDEsInkiOjY1Nn0seyJ4IjoxOTEuOTQ5MjE4NzUsInkiOjYwNi41fSx7IngiOjE5MS45NDkyMTg3NSwieSI6NDgyfSx7IngiOjE5MS45NDkyMTg3NSwieSI6MzY5LjV9LHsieCI6MTkxLjk0OTIxODc1LCJ5IjozMjB9LHsieCI6MTkxLjk0OTIxODc1LCJ5IjoyNzAuNX0seyJ4Ijo0MDAuNjc5Njg3NSwieSI6MjAxLjE3NTkyMTEyMDkxMzMzfV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M595.711,233L601.13,239.25C606.549,245.5,617.388,258,622.807,272.5C628.227,287,628.227,303.5,628.227,320C628.227,336.5,628.227,353,628.227,370.833C628.227,388.667,628.227,407.833,628.227,417.417L628.227,427" id="L_MapSync_AppControllerNew_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_MapSync_AppControllerNew_0" data-points="W3sieCI6NTk1LjcxMDkzNzUsInkiOjIzM30seyJ4Ijo2MjguMjI2NTYyNSwieSI6MjcwLjV9LHsieCI6NjI4LjIyNjU2MjUsInkiOjMyMH0seyJ4Ijo2MjguMjI2NTYyNSwieSI6MzY5LjV9LHsieCI6NjI4LjIyNjU2MjUsInkiOjQzMX1d" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M510.773,769.077L553.121,781.481C595.469,793.885,680.164,818.692,722.512,839.346C764.859,860,764.859,876.5,764.859,893C764.859,909.5,764.859,926,764.859,939.833C764.859,953.667,764.859,964.833,764.859,970.417L764.859,976" id="L_MapHook_Benefit2_0" class="edge-thickness-normal edge-pattern-dotted edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_MapHook_Benefit2_0" data-points="W3sieCI6NTEwLjc3MzQzNzUsInkiOjc2OS4wNzc0MTU5NDI4ODM4fSx7IngiOjc2NC44NTkzNzUsInkiOjg0My41fSx7IngiOjc2NC44NTkzNzUsInkiOjg5M30seyJ4Ijo3NjQuODU5Mzc1LCJ5Ijo5NDIuNX0seyJ4Ijo3NjQuODU5Mzc1LCJ5Ijo5ODB9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M660.68,192.89L708.876,205.825C757.073,218.76,853.466,244.63,901.663,265.815C949.859,287,949.859,303.5,949.859,320C949.859,336.5,949.859,353,949.859,366.833C949.859,380.667,949.859,391.833,949.859,397.417L949.859,403" id="L_MapSync_Benefit4_0" class="edge-thickness-normal edge-pattern-dotted edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_MapSync_Benefit4_0" data-points="W3sieCI6NjYwLjY3OTY4NzUsInkiOjE5Mi44ODk1NzIyNjcyNjMwOH0seyJ4Ijo5NDkuODU5Mzc1LCJ5IjoyNzAuNX0seyJ4Ijo5NDkuODU5Mzc1LCJ5IjozMjB9LHsieCI6OTQ5Ljg1OTM3NSwieSI6MzY5LjV9LHsieCI6OTQ5Ljg1OTM3NSwieSI6NDA3fV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M383.099,806L383.293,812.25C383.487,818.5,383.874,831,384.068,845.5C384.262,860,384.262,876.5,384.262,892.333C384.262,908.167,384.262,923.333,384.262,930.917L384.262,938.5" id="L_MapHook_MapContainerNew_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_MapHook_MapContainerNew_0" data-points="W3sieCI6MzgzLjA5ODk1ODMzMzMzMzMsInkiOjgwNn0seyJ4IjozODQuMjYxNzE4NzUsInkiOjg0My41fSx7IngiOjM4NC4yNjE3MTg3NSwieSI6ODkzfSx7IngiOjM4NC4yNjE3MTg3NSwieSI6OTQyLjV9LHsieCI6Mzg0LjI2MTcxODc1LCJ5Ijo5OTJ9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M532.418,1192.202L878.364,1209.253" id="L_MapContainerNew_Benefit1_0" class="edge-thickness-normal edge-pattern-dotted edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_MapContainerNew_Benefit1_0" data-points="W3sieCI6NDAzLjE3MDUzNDA0ODUwNzUsInkiOjEwNzB9LHsieCI6NDMyLjk4ODI4MTI1LCJ5IjoxMTMxLjV9LHsieCI6ODgyLjM1OTM3NSwieSI6MTIwOS40NDk2ODYxNDk0NDh9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M1259.859,270.5L1259.859,278.75C1259.859,287,1259.859,303.5,1259.859,320C1259.859,336.5,1259.859,353,1259.859,370.833C1259.859,388.667,1259.859,407.833,1259.859,417.417L1259.859,427" id="L_SyncLayer_Benefit3_0" class="edge-thickness-normal edge-pattern-dotted edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_SyncLayer_Benefit3_0" data-points="W3sieCI6NjYwLjY3OTY4NzUsInkiOjE3OC4wNTY3ODQ3MDAyNzMyfSx7IngiOjEyNTkuODU5Mzc1LCJ5IjoyNzAuNX0seyJ4IjoxMjU5Ljg1OTM3NSwieSI6MzIwfSx7IngiOjEyNTkuODU5Mzc1LCJ5IjozNjkuNX0seyJ4IjoxMjU5Ljg1OTM3NSwieSI6NDMxfV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M784.859,662.248L970.91,692.22" id="L_PageTsxNew_Benefit5_0" class="edge-thickness-normal edge-pattern-dotted edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_PageTsxNew_Benefit5_0" data-points="W3sieCI6NjQ5LjY1NTc3OTM2NzQ2OTksInkiOjUzM30seyJ4Ijo2ODAuNTM5MDYyNSwieSI6NjA2LjV9LHsieCI6OTc0Ljg1OTM3NSwieSI6NjkyLjg1NjY0NTczODU4OTJ9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(575.9140625, 606.5)"><g class="label" data-id="L_AppControllerNew_MapHook_0" transform="translate(-53.921875, -12)"><foreignObject width="107.84375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>events + filters</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(311.21455, 1136.41418)"><g class="label" data-id="L_MapGL_ViewportOnly_0" transform="translate(-26.9140625, -12)"><foreignObject width="53.828125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>onMove</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(460.296875, 482)"><g class="label" data-id="L_MapSync_MapHook_0" transform="translate(-19.375, -12)"><foreignObject width="38.75" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>reads</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(312.51953125, 482)"><g class="label" data-id="L_MapSync_MapHook_2" transform="translate(-28.265625, -12)"><foreignObject width="56.53125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>updates</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(176.86328125, 1031)"><g class="label" data-id="L_ViewportOnly_MapHook_0" transform="translate(-59.2421875, -12)"><foreignObject width="118.484375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>viewport change</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(191.94921875, 482)"><g class="label" data-id="L_MapHook_MapSync_0" transform="translate(-72.3046875, -12)"><foreignObject width="144.609375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>auto-derives bounds</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(628.2265625, 320)"><g class="label" data-id="L_MapSync_AppControllerNew_0" transform="translate(-25.1875, -12)"><foreignObject width="50.375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>bounds</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(764.859375, 893)"><g class="label" data-id="L_MapHook_Benefit2_0" transform="translate(-30.703125, -12)"><foreignObject width="61.40625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>achieves</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(949.859375, 320)"><g class="label" data-id="L_MapSync_Benefit4_0" transform="translate(-30.703125, -12)"><foreignObject width="61.40625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>achieves</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(384.26172, 874.24099)"><g class="label" data-id="L_MapHook_MapContainerNew_0" transform="translate(-65.59375, -12)"><foreignObject width="131.1875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>viewport, markers</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(707.38867, 1200.82595)"><g class="label" data-id="L_MapContainerNew_Benefit1_0" transform="translate(-30.703125, -12)"><foreignObject width="61.40625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>achieves</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1259.85938, 350.75)"><g class="label" data-id="L_SyncLayer_Benefit3_0" transform="translate(-30.703125, -12)"><foreignObject width="61.40625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>achieves</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(879.85938, 677.55231)"><g class="label" data-id="L_PageTsxNew_Benefit5_0" transform="translate(-30.703125, -12)"><foreignObject width="61.40625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>achieves</p></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" id="flowchart-MapSync-7" transform="translate(530.6796875, 158)"><rect class="basic label-container" style="" x="-130" y="-75" width="260" height="150"/><g class="label" style="" transform="translate(-100, -60)"><rect/><foreignObject width="200" height="120"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>useMapSync Hook<br />Derives bounds from viewport<br />Syncs viewport â†” events<br />NO debounce needed</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-AppControllerNew-0" transform="translate(628.2265625, 482)"><rect class="basic label-container" style="" x="-102.9375" y="-51" width="205.875" height="102"/><g class="label" style="" transform="translate(-72.9375, -36)"><rect/><foreignObject width="145.875" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>useAppController<br />â€¢ Business logic only<br />â€¢ No map state</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-MapHook-1" transform="translate(380.7734375, 731)"><rect class="basic label-container" style="" x="-130" y="-75" width="260" height="150"/><g class="label" style="" transform="translate(-100, -60)"><rect/><foreignObject width="200" height="120"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>useMapState Hook<br />â€¢ viewport, bounds, markers<br />â€¢ selectedMarkerId<br />â€¢ All derived from events</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-MapGL-4" transform="translate(384.26171875, 1031)"><rect class="basic label-container" style="" x="-113.15625" y="-39" width="226.3125" height="78"/><g class="label" style="" transform="translate(-83.15625, -24)"><rect/><foreignObject width="166.3125" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>react-map-gl/MapLibre<br />ONLY renders map</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-ViewportOnly-6" transform="translate(212.5859375, 1232)"><rect class="basic label-container" style="" x="-115.6875" y="-39" width="231.375" height="78"/><g class="label" style="" transform="translate(-85.6875, -24)"><rect/><foreignObject width="171.375" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Update viewport ONLY<br />(no callbacks to parent)</p></span></div></foreignObject></g></g><g class="node default benefit" id="flowchart-Benefit2-21" transform="translate(764.859375, 1031)"><rect class="basic label-container" style="fill:#ccffcc !important;stroke:#00cc00 !important;stroke-width:2px !important" x="-130" y="-51" width="260" height="102"/><g class="label" style="" transform="translate(-100, -36)"><rect/><foreignObject width="200" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>âœ“ No Callbacks<br />Child â†’ Parent via hook state only</p></span></div></foreignObject></g></g><g class="node default benefit" id="flowchart-Benefit4-23" transform="translate(949.859375, 482)"><rect class="basic label-container" style="fill:#ccffcc !important;stroke:#00cc00 !important;stroke-width:2px !important" x="-130" y="-75" width="260" height="150"/><g class="label" style="" transform="translate(-100, -60)"><rect/><foreignObject width="200" height="120"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>âœ“ Clear Data Flow<br />events â†’ useMapState â†’ view<br />viewport â†’ useMapSync â†’ bounds</p></span></div></foreignObject></g></g><g class="node default benefit" id="flowchart-Benefit1-20" transform="translate(1012.359375, 1232)"><rect class="basic label-container" style="fill:#ccffcc !important;stroke:#00cc00 !important;stroke-width:2px !important" x="-130" y="-51" width="260" height="102"/><g class="label" style="" transform="translate(-100, -36)"><rect/><foreignObject width="200" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>âœ“ Single Responsibility<br />Each component does ONE thing</p></span></div></foreignObject></g></g><g class="node default benefit" id="flowchart-Benefit3-22" transform="translate(1259.859375, 482)"><rect class="basic label-container" style="fill:#ccffcc !important;stroke:#00cc00 !important;stroke-width:2px !important" x="-130" y="-51" width="260" height="102"/><g class="label" style="" transform="translate(-100, -36)"><rect/><foreignObject width="200" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>âœ“ No Debounce<br />Bounds derived synchronously</p></span></div></foreignObject></g></g><g class="node default benefit" id="flowchart-Benefit5-24" transform="translate(1104.859375, 731)"><rect class="basic label-container" style="fill:#ccffcc !important;stroke:#00cc00 !important;stroke-width:2px !important" x="-130" y="-51" width="260" height="102"/><g class="label" style="" transform="translate(-100, -36)"><rect/><foreignObject width="200" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>âœ“ Testable<br />Each hook independently testable</p></span></div></foreignObject></g></g></g></g></g></g></g><text text-anchor="middle" x="716.4296875" y="-25" class="flowchartTitleText">PROPOSED ARCHITECTURE: Single Responsibility, Clear Data Flow</text></svg>